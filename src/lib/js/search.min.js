function autocomplete(e,t){function n(t){if(!t)return!1;o(t),i>=t.length&&(i=0),i<0&&(i=t.length-1),t[i].classList.add("autocomplete-active"),e.value=t[i].textContent}function o(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}function a(t){for(var n=document.getElementsByClassName("autocomplete-items"),o=0;o<n.length;o++)t!=n[o]&&t!=e&&n[o].parentNode.removeChild(n[o])}var i;const s=100;e.addEventListener("input",function(n){var o,l,c,u=this.value;if(a(),!u)return!1;i=-1,o=document.createElement("DIV"),o.setAttribute("id",this.id+"autocomplete-list"),o.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(o);let r=0;for(c=0;c<t.length;c++)if(-1!=t[c].toLowerCase().indexOf(u.toLowerCase())){if(r==s)break;r++,l=document.createElement("DIV"),l.textContent+=t[c],l.innerHTML+="<input type='hidden' value='"+t[c]+"'>",l.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,a(),$("#county-search-form").submit()}),o.appendChild(l)}}),e.addEventListener("keydown",function(t){var o=document.getElementById(this.id+"autocomplete-list");o&&(o=o.getElementsByTagName("div")),40==t.keyCode?(i++,n(o)):38==t.keyCode?(i--,n(o)):13==t.keyCode&&(t.preventDefault(),""!=e.value&&(a(),$("#county-search-form").submit()))}),document.addEventListener("click",function(e){a(e.target)})}const handleSearch=(e,t,n,o,a,i,s)=>{const l=$(".search")[0];$("#county-search-form").submit(c=>{c.preventDefault();let u=allCounties[l.value.toUpperCase()],r=e[0][u];console.log(a);const d=s[r.fips];if(select(d,i,n,o),r){let n=t.filter(e=>e.state==r.state);info(r,e,n)}else alert('County not found. Please enter in form "county, state", or choose from the options.');l.value=""})};autocomplete($(".search")[0],Object.keys(allCounties));
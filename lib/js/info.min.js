const handleUrls=e=>`<a href=${e}>(View source)</a>`,handleDates=e=>{let t="";for(let a=0;a<e.length;a++)t+=e[a],3!=a&&5!=a||(t+="-");return`<span class='date'>${t}</span>`},addEmphasis=e=>`<span class='highlight'>${e}</span>`,cleanGuidelines=e=>{let t=e.split(" ");for(let e=0;e<t.length;e++)"http"==t[e].slice(0,4)?t[e]=handleUrls(t[e]):-1!=t[e].indexOf("2020")?(t[e]=handleDates(t[e]),"On"==t[e-1]&&(t[e-2]+="<br><br>")):"covering"!==t[e]&&-1===t[e].indexOf("mask")&&-1===t[e].indexOf("travel")&&-1===t[e].indexOf("gather")||(t[e]=addEmphasis(t[e]));return t.join(" ")},displayGuidelineData=e=>{const t=$(".state-guidelines");t.html(""),e.forEach(e=>{let a=e.notes;-1==a.indexOf("mask")&&-1==a.indexOf("travel")&&-1==a.indexOf("cover")||t.append(`<li>${cleanGuidelines(a)}</li>`)})},hideInfo=()=>{$(".info-container").css({display:"none"}),$("#modal-mask").css({display:"none"})},dataTable=(e,t)=>{$("#weekly-data").text("").append("<tr><th>Date</th><th>Cases (+Daily Increase)</th><th>Deaths</th></tr>");for(let a=t.length-1;a>=0;a--){let s=t[a][e];$("#weekly-data").append(`<tr>\n                    <td>${s.date}</td>\n                    <td>${parseInt(s.cases).toLocaleString()} <span class=${s.increase>0?"increase":"decrease"}>(+${s.increase})</span></td>\n                    <td>${s.deaths}</td>\n                </tr>`)}},info=(e,t,a)=>{if(e.cases){hideAbout(),$(".info-container").css({display:"block"}),$("#info-county").text(`${e.countyName}, `),$("#info-state").text(`${e.state}`);let s=0,n=setInterval(()=>{s>e.cases&&(s=e.cases,clearInterval(n)),$("#info-cases").text(`${parseInt(s).toLocaleString()}`),s+=e.cases/100},2);$("#source").attr("href",sources[e.state]).text("View Current Travel Advisories Here"),$("#info-deaths").text(`${parseInt(e.deaths).toLocaleString()}`),dataTable(e.fips,t),displayGuidelineData(a),$(".exit").click(hideInfo)}else alert('County not found. Please enter in form "county, state"')},showAbout=()=>{$(".about-container").css({display:"block"}),$("#about").html("This website was made to assist those travelling during the Covid-19 pandemic. The map shows every county in the United States, color coded based on the number of new cases in the past week. The green counties have an increase of less than or equal to 0 cases in the past week. By clicking on a county, the cases and deaths in that county are displayed, as well as a link to the state's travel guidelines. Below, there are general notes from that state."),$("#about").append('<p>Covid-19 data is pulled from the <a href="https://github.com/nytimes/covid-19-data" target="_blank">NY Times</a>, and notes are pulled from <a href="https://github.com/COVID19StatePolicy/SocialDistancing" target="_blank">Covid19StatePolicy</a></p>').append("<p>Click on a county to begin!</p>"),$(".exit").click(hideAbout)},hideAbout=()=>{$(".about-container").css({display:"none"})};showAbout(),$("#nav-about").click(()=>{showAbout(),hideInfo()});